<!DOCTYPE html>
<html>
    <title>Farmer Page</title>
    <!--jquery-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <!--datatables-->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <!--bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.3/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.3/js/bootstrap-select.js"></script>
    <body>
        <h3>Create Cattle</h3>
		<form id="createCattleForm">
			Cattle Id: <input type="text" id="cattleId" name="cattleId" required /><br/>
			Birth Date: <input type="date" id="birthDate" name="birthDate" required /><br/>
			Gender: <select id="gender" required>
				<option value="Male">Male</option>
				<option value="Female">Female</option>
			</select>
			<br/>
			Breed: <input type="text"id="breed" name="breed" required /><br/>
			Mother: <input type="text" id="mother" name="mother" required /><br/>
			Father: <input type="text" id="father" name="father" required /><br/>
			Is Dead?: <select id="isDead" required>
				<option value="false">false</option>
				<option value="true">true</option>
			</select>
			<br/><br/>
			<input type="button" onclick='createCattle()' value="Submit" >
		</form>
		<br/><br/>
		<button onclick="location.href='/index.html'">Back</button>
    </body>
<script type="text/javascript">
function createCattle() {
	var cattleId = document.getElementById("cattleId").value;
	var birthDate = document.getElementById("birthDate").value;
	var gender = document.getElementById("gender").value;
	var breed = document.getElementById("breed").value;
	var mother = document.getElementById("mother").value;
	var father = document.getElementById("father").value;
	var isDead = document.getElementById("isDead").value;
	
	$.ajax({
        method: "POST",
        url: "/hlf/api/org.example.basic.CreateCattle",
        data: {
			"$class": "org.example.basic.CreateCattle",
			"newCattle": {
				"$class": "org.example.basic.Cattle",
				"cattleId": cattleId,
				"birthDate": birthDate,
				"gender": gender,
				"breed": breed,
				"lineage": {
					"$class": "org.example.basic.Lineage",
					"motherCattleId": mother,
					"fatherCattleId": father
				},
				"isDead": isDead,
				"farmerOwner": "resource:org.example.basic.Farmer#3376"
			}
        }
    }).done(function(msg) {
        console.log(msg);
		alert("Cattle " + cattleId + " created successfully!");
        location.reload();
    }).fail(function() {
        alert("Error performing create cattle");
    })
}
</script>
</html>